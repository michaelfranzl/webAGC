<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>webAGC</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="screen.css">

    <script type="importmap">
      {
        "imports": {
          "WebAGC": "../src/webAGC.js",
          "@wasmer/wasi": "./jspm_packages/npm/@wasmer/wasi@0.12.0/lib/index.esm.js",
          "@wasmer/wasi/": "./jspm_packages/npm/@wasmer/wasi@0.12.0/",
          "@wasmer/wasmfs": "./jspm_packages/npm/@wasmer/wasmfs@0.12.0/lib/index.esm.js",
          "buffer": "./jspm_packages/npm/@jspm/core@1.1.1/nodelibs/buffer.js",
          "crypto": "./jspm_packages/npm/@jspm/core@1.1.1/nodelibs/crypto.js",
          "fs": "./jspm_packages/npm/@jspm/core@1.1.1/nodelibs/@empty.js",
          "path": "./jspm_packages/npm/@jspm/core@1.1.1/nodelibs/path.js",
          "process": "./jspm_packages/npm/@jspm/core@1.1.1/nodelibs/process.js",
          "tty": "./jspm_packages/npm/@jspm/core@1.1.1/nodelibs/tty.js",
          "webdsky": "./jspm_packages/npm/webdsky@1.0.2/webDSKY.js",
          "path-browserify/": "./jspm_packages/npm/path-browserify@1.0.1/",
          "randomfill/index.dew.js": "./jspm_packages/npm/randomfill@1.0.4/browser.dew.js",
          "safe-buffer/": "./jspm_packages/npm/safe-buffer@5.2.1/",
          "randombytes/index.dew.js": "./jspm_packages/npm/randombytes@2.1.0/browser.dew.js"
        }
      }
    </script>
    <script type="module" src="index.js"></script>
  </head>

  <body>
    <h1>webAGC Demo (beta)</h1>

    <p>Explainer and source code is available at <a href="https://github.com/michaelfranzl/webAGC" target="_blank">https://github.com/michaelfranzl/webAGC</a></p>

    <p>
      <i>For the time being, requires a browser supporting <a href="https://caniuse.com/?search=importmap" target="_blank">import maps</a> (e.g. based on Chromium 89 or newer).</i>
    </p>

    <div>
      <label>Clock divisor:</label>
      <select id="clock_divisor">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="4">4</option>
        <option value="8">8</option>
        <option value="16">16</option>
        <option value="32">32</option>
        <option value="64">64</option>
        <option value="128">128</option>
        <option value="256">256</option>
        <option value="512">512</option>
        <option value="1024">1024</option>
        <option value="2048">2048</option>
        <option value="4096">4096</option>
        <option value="8192">8192</option>
        <option value="32768">32768</option>
        <option value="65536">65536</option>
        <option value="inf">inf</option>
      </select>
    </div>

    <div>
      <label>Instructions per second:</label>
      <span id="clock_speed"></span>
    </div>

    <div>
      <label>CPU manipulation:</label>
      <button id="button_reset">Reset</button>
      <button id="button_pause">Pause</button>
      <button id="button_step">Step</button>
      <button id="button_run">Run</button>
    </div>

    <div>
      <label>Load program into fixed memory:</label>
      <select name="" id="programs">
        <option></option>
        <option value="Luminary099.bin">Luminary099.bin</option>
        <option value="Validation.bin">Validation.bin</option>
      </select>
      <small>(explainer coming soon)</small>
    </div>

    <div>
      <label>DSKY key input:</label>
      <input id="dsky_key_input"></input>
      <small>(auto-types pasted text)</small>
      <br/>
      <small>
        <kbd>0</kbd>-<kbd>9</kbd>, <kbd>+</kbd>, <kbd>-</kbd>, VERB: <kbd>v</kbd>, NOUN: <kbd>n</kbd>,CLR: <kbd>c</kbd>, KEY REL: <kbd>k</kbd>, ENTR: <kbd>e</kbd> or <kbd>Enter</kbd>, RSET: <kbd>r</kbd>, PRO: <kbd>p</kbd>
      </small>
    </div>

    <div id="dsky"></div>

    <div id="erasable">
      <h2>Erasable memory</h2>
      <p>Live view on 8 banks of 256 15-bit words in octal notation.</p>
    </div>
  </body>
</html>
